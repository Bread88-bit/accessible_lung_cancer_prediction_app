<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lung Cancer Prediction App</title>
    <link rel="stylesheet" href="https://pyscript.net/snapshots/2024.9.2/core.css"/>
    <link rel="icon" type="image/x-icon" href="imgs/aerislogo2.png">
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=League Spartan' rel='stylesheet'>
    <link href="https://fonts.cdnfonts.com/css/open-sauce-one" rel="stylesheet">
    <script type="module" src="https://pyscript.net/snapshots/2024.9.2/core.js"></script>
    
</head>
<script>
  var progress = 0
  function firststart() {
    document.getElementById("firstpagecircle").style.display = "none"
    document.getElementById("firstpagediv").style.display = "none"
    document.getElementById("sympdiv").style.display = "block"
    document.getElementById("male").style.display = "block"
    document.getElementById("female").style.display = "block"
    progress = 1
  }
    function gender(g) {
    if (g==1){
      document.getElementById("storeage").value = "1"
      document.getElementById("rectmale").style.fill = "#aaf2ff"
      document.getElementById("rectfemale").style.fill = "#ffffff"

    }else{
      document.getElementById("storeage").value = "0"
      document.getElementById("rectfemale").style.fill = "#aaf2ff"
      document.getElementById("rectmale").style.fill = "#ffffff"

    }
  }
  function secondstart() {
    if (progress == 1){
      if (document.getElementById("storeage").value == "-1") {
        document.getElementById("statusbar").innerHTML = "请选择一项"
        document.getElementById("antistatusbar").style.display = "none"        
        setTimeout(removestatus, 3000)
      }else{
        document.getElementById("sympq").innerHTML = "您的岁数"
        document.getElementById("male").style.display = "none"
        document.getElementById("female").style.display = "none"
        document.getElementById("ageinput").style.display = "block"
        progress = 2
      }
      }else if (progress == 2){
        if (document.getElementById("ageinput").value == "" || document.getElementById("ageinput").value < 0) {
          document.getElementById("statusbar").innerHTML = "请输入您的岁数"
          document.getElementById("antistatusbar").style.display = "none"        
          setTimeout(removestatus, 3000)
        }else{
          document.getElementById("ageinput").style.display = "none"
          document.getElementById("sympq").innerHTML = "症状、习惯和医疗问题"
          document.getElementById("selectdiv").style.display = "block"
          document.getElementById("nexttbtn").style.display = "none"
          document.getElementById("submittbtn").style.display = "block"
          progress = 3
        }
        

      }else if (progress == 3) {
        document.getElementById("submittbtn").style.display = "none"
        document.getElementById("selectdiv").style.display = "none"
        document.getElementById("sympq").innerHTML = "结果："
        document.getElementById("telluspara").style.display = "none"
        document.getElementById("resultbox").style.display = "block"

      }

  }
  function removestatus() {
    document.getElementById("statusbar").innerHTML = ""
    document.getElementById("antistatusbar").style.display = "block"
  }
  function showmore() {
    if (iffurther == 0) {
      document.getElementById("furtherresult").style.display = "block"
      document.getElementById("showhide").innerHTML = "隐藏详细信息"
      iffurther = 1
    }else{
      document.getElementById("furtherresult").style.display = "none"
      document.getElementById("showhide").innerHTML = "显示详细信息"
      iffurther = 0
    }
  }
  iffurther = 0
    var advicecheck = 0
  var riskadvice2 = ["高","中","低"]
  var riskadvice = ["如有吸烟，请立即戒烟，戒烟仍能显著降低风险。每年进行低剂量CT筛查。减少环境氡气的累积。频繁监测症状，如有不适请立即就医。","请戒烟并避免二手烟，定期肺功能检查每2-3年一次，使用空气净化器，在雾霾天戴口罩。增加十字花科蔬菜如西兰花、卷心菜，和富含维生素C的食物以降低氧化损伤。","请保持不吸烟并避免二手烟，进行规律运动如每周150分钟有氧运动、有充足睡眠。多吃番茄，含番茄红素、坚果，含维生素E、绿茶，含多酚类。"]
  var advice = ["吸烟<br>采用尼古丁替代疗法，如口香糖、贴片或处方药物逐步戒烟。参加戒烟门诊或线上戒烟社区寻求支持。用嚼无糖口香糖、深呼吸或运动替代吸烟冲动。<br><br>","黄手指<br>用柠檬汁加小苏打轻轻搓洗，或使用去角质磨砂膏。彻底解决根源问题，请戒烟。<br><br>","焦虑<br>每天5-10分钟深呼吸或正念冥想来放松。限制咖啡因、酒精摄入。如有需要请寻找专业帮助。<br><br>","同侪压力<br>与同样想戒烟/戒酒的朋友互相鼓励，寻找支持群体。在社交场合手持饮料，如无酒精鸡尾酒，减少被劝酒压力。如被迫吸烟、饮酒，坚定拒绝，现在健康优先。<br><br>","慢性病<br>定期检查肺功能、监测血压等。严格按医嘱用药，如吸入剂、降压药）。进行低盐饮食、适度运动，如快走、游泳。<br><br>","疲劳<br>固定作息时间，睡前1小时避免电子设备。检查是否缺铁或维生素D，适量补充B族维生素。每天20分钟快走，提升体能和避免久坐。<br><br>","过敏<br>使用空气净化器，定期清洗床单、窗帘。按医嘱使用抗组胺药或哮喘吸入剂。避免接触花粉、宠物皮屑。<br><br>","喘息<br>避免冷空气、烟雾刺激，坚持用药，如糖皮质激素吸入剂。<br><br>","喝酒<br>设定每周饮酒上限，改用低酒精饮品。以无酒精啤酒、气泡水+柠檬替代。如有肝病、胃炎或服用抗焦虑药，需戒酒。<br><br>","咳嗽<br>喝温水加蜂蜜，使用加湿器。如痰中带血、夜间呛咳，需排查肺癌或肺结核。<br><br>","气促<br>避免剧烈运动，练习腹式呼吸。<br><br>","吞咽困难<br>软食为主，避免过热、辛辣食物。<br><br>","胸痛<br> 戒烟戒酒减少心血管负担。定期检查心电图。压榨性胸痛向左臂放射的话请立即就医。"]
  var listadvice = ""
  var placehold = ""
  setInterval(outputresult, 1000)
  function outputresult() {
    placehold = document.getElementById("r_adj").innerHTML

    if (placehold != "您的风险是：" && advicecheck == 0) {
      document.getElementById("advice_one").innerHTML = riskadvice[riskadvice2.indexOf(placehold[placehold.length-1])]
      listadvice = ""
      for (let i = 2; i<15 ; i++) {
        if (document.getElementById("d"+i).checked == true) {
          listadvice += advice[i-2]
        }
      }
      document.getElementById("advice_two").innerHTML = listadvice
      advicecheck = 1
    }
    
  }
</script>
<style>
    .py-error {
        display:none;
    }
    #bodyy {
        background-image: url('imgs/bluebg.png');
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover;
    }
    rect:hover {
      fill:#aaf2ff;
    }
</style>

<img src="imgs/aerislogo.png" style="width:180px;height100px">
<svg width="80" height="80" onclick="window.location.href = 'index.html'" style="cursor: pointer;position:absolute;left:200px">
  <rect width="50" height="50" x="10" y="10" clip-path="inset(0% round 50px)" fill="white" />
  <image x="12.5" y="12.5" href="imgs/desktop.png" width="45" height="45" clip-path="inset(0% round 600px)"/>

</svg>


<div style="display:block" id="firstpagediv">
<p style="font-family:'Montserrat';font-size:22.7px;color:white">我们的目的是</p><br>
<h1 style="font-family:'League Spartan';font-size:44.8px;color:white;line-height:1.6">预测您肺癌的风险</h1>
<p style="font-family:'Open Sauce One';font-size:13.8px;color:white">一个致力于帮助人们的网站。</p>
<div style="width:100%;height:100%;display:block" id="firstpagecircle">
<svg height="505" width="505">
  <circle cx="300" cy="300" r="200" id="firstcircle"
  stroke="#0097b2" stroke-width="6" fill="#ffffff" style="background-image: url('imgs/doctorhand.png')"/>
Sorry, your browser does not support inline SVG.
  <image x="110" y="110" href="imgs/2doctorhand.png" width="380" height="380" clip-path="inset(0% round 600px)"/>
</svg>    
</div><br><br>
<svg width="220" height="130" onclick="firststart()" style="cursor: pointer">
  <rect width="200" height="50" x="10" y="10" clip-path="inset(0% round 50px)" fill="white" />
  <text x="50" y="40" fill="black" style="font-family:'Montserrat';font-size:17.1px">现在开始</text>
  <image x="162.5" y="12.5" href="imgs/bluecirclearrow.png" width="45" height="45" clip-path="inset(0% round 600px)"/>

</svg>
</div>








<div style="position:absolute;left:60px;top:100px;display:none" id="sympdiv">
<p style="font-family:'Montserrat';font-size:22.7px;color:white" id="telluspara">告诉我们：</p>
<h1 style="font-family:'League Spartan';font-size:44.8px;color:white" id="sympq">您的性别</h1>
<br><br><br><br><br><br><br><br><br><br><br><br><br id="antistatusbar"><p id="statusbar" style="font-family:'Montserrat';font-size:22.7px;color:#ff0000"></p><br><br>
<svg width="220" height="130" onclick="secondstart()" style="cursor: pointer" id="nexttbtn">
  <rect width="200" height="50" x="10" y="10" clip-path="inset(0% round 50px)" fill="white" />
  <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:20px">继续</text>
  <image x="162.5" y="12.5" href="imgs/bluecirclearrow.png" width="45" height="45" clip-path="inset(0% round 600px)"/>

</svg>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<svg width="220" height="130" py-click="submitbtn" onclick="secondstart()" style="cursor: pointer;display:none" id="submittbtn">
  <rect width="200" height="50" x="10" y="10" clip-path="inset(0% round 50px)" fill="white" />
  <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:17.1px" id="nextbtn">提交</text>
  <image x="162.5" y="12.5" href="imgs/bluecirclearrow.png" width="45" height="45" clip-path="inset(0% round 600px)"/>

</svg>

</div>
<input id="storeage" style="display:none" value="-1">
<div style="position:absolute;left:60px;top:350px" id="ansdiv">
<svg width="220" height="130" onclick="gender(1)" style="cursor: pointer" id="male" display="none">
  <rect width="200" height="50" x="10" y="10" clip-path="inset(0% round 50px)" id="rectmale" fill="white" />
  <text x="100" y="40" fill="black" style="font-family:'Montserrat';font-size:17.1px">男</text>

</svg><br>
<svg width="220" height="130" onclick="gender(0)" style="cursor: pointer" id="female" display="none">
  <rect width="200" height="50" x="10" y="10" clip-path="inset(0% round 50px)" id="rectfemale" fill="white" />
  <text x="100" y="40" fill="black" style="font-family:'Montserrat';font-size:17.1px">女</text>

</svg>
<input type=number id="ageinput" placeholder="AGE:" style="display:none;height:35px;width:170px;padding: 6px 10px;color: #333;border-radius:50px;font-size:17.1px;margin-bottom: 20px;border-color:white;text-align:center">

  <div id="selectdiv" style="display:none">
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">吸烟</text>
    </svg>
    <input id="d2" type="checkbox" style="width:50px;height:50px">
    
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="50" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">黄手指</text>
    </svg>
    <input id="d3" type="checkbox" style="width:50px;height:50px">
    <br>
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">焦虑</text>
    </svg>
    <input id="d4" type="checkbox" style="width:50px;height:50px">
    
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="38" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">同侪压力</text>
    </svg>
    <input id="d5" type="checkbox" style="width:50px;height:50px">
    <br>
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="55" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">慢性病</text>
    </svg>
    <input id="d6" type="checkbox" style="width:50px;height:50px">
    
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">疲劳</text>
    </svg>
    <input id="d7" type="checkbox" style="width:50px;height:50px">
    <br>
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">过敏</text>
    </svg>
    <input id="d8" type="checkbox" style="width:50px;height:50px">
    
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">喘息</text>
    </svg>
    <input id="d9" type="checkbox" style="width:50px;height:50px">
    <br>
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">喝酒</text>
    </svg>
    <input id="d10" type="checkbox" style="width:50px;height:50px">
    
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">咳嗽</text>
    </svg>
    <input id="d11" type="checkbox" style="width:50px;height:50px">
    <br>
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">气促</text>
    </svg>
    <input id="d12" type="checkbox" style="width:50px;height:50px">
    
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="30" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">吞咽困难</text>
    </svg>
    <input id="d13" type="checkbox" style="width:50px;height:50px">
    <br>
    <svg width="160" height="60">
    <rect width="150" height="50" x="10" y="10" fill="#98efff" />
    <text x="60" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">胸痛</text>
    </svg>
    <input id="d14" type="checkbox" style="width:50px;height:50px">
  </div>
</div>

<body id="bodyy">
    <div id="resultbox" style="position:absolute;left:60px;top:180px;display:none">
    <svg width="410" height="60">
    <rect width="400" height="50" x="10" y="10" fill="#fffdc5" style="stroke-width:4;stroke:#dbae7e" />
    <text id="r_adj" x="35" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">您的风险是：</text>
    </svg><br>
<!--
    <svg width="100" height="60">
    <rect width="100" height="50" x="10" y="10" fill="#a0ff94"/>
    <text x="35" y="30" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold"> <40% </text>
    <text x="35" y="50" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold"> LOW </text>
    </svg>
    <svg width="100" height="60">
    <rect width="100" height="50" x="10" y="10" fill="#faff94"/>
    <text x="30" y="30" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold"> 40-60% </text>
    <text x="25" y="50" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold"> MEDIUM </text>
    </svg>
    <svg width="100" height="60">
    <rect width="100" height="50" x="10" y="10" fill="#ffcb94"/>
    <text x="30" y="30" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold"> 61-80% </text>
    <text x="35" y="50" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold"> HIGH </text>
    </svg>
    <svg width="100" height="60">
    <rect width="100" height="50" x="10" y="10" fill="#ff9494"/>
    <text x="30" y="30" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold"> 81-100% </text>
    <text x="17.5" y="50" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold"> VERY HIGH </text>
    </svg>--><br><p style="font-family:'Montserrat';font-size:17.1px;color:red">*分析仅供个人参考，<br>请寻求专业医疗支持以获得详细诊断.<br>*本网站不会记录您的资料</p>
    <svg width="170" height="60" onclick="showmore()" style="cursor: pointer">
  <rect width="150" height="50" x="10" y="10" clip-path="inset(0% round 50px)" fill="white" />
  <text id="showhide" x="35" y="40" fill="black" style="font-family:'Montserrat';font-size:17.1px">显示详细信息</text>
</svg>
    <div id="furtherresult" style="display:none">
    <svg width="410" height="60">
    <rect width="400" height="50" x="10" y="10" fill="#06b51d" style="stroke-width:4;stroke:#029515" />
    <text x="35" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">引导聚合 - 决策树模型</text>
    </svg><br>
    <svg width="220" height="60">
    <rect width="220" height="50" x="10" y="10" fill="#00d1ff"/>
    <text id="r_m1d" x="20" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">模型结果：</text>
    </svg>
    <svg width="185" height="60">
    <rect width="185" height="50" x="10" y="10" fill="#3b00ff"/>
    <text id="r_m1r" x="20" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">风险：</text>
    </svg><br>
    <svg width="410" height="60">
    <rect width="410" height="50" x="10" y="10" fill="#faff00"/>
    <text id="r_m1a" x="25" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">准确度：</text>
    </svg><br><br>
    <svg width="410" height="60">
    <rect width="400" height="50" x="10" y="10" fill="#cf5aff" style="stroke-width:4;stroke:#9742b9" />
    <text x="35" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">支持向量机模型</text>
    </svg><br>
    <svg width="410" height="60">
    <rect width="400" height="50" x="10" y="10" fill="#00d1ff"/>
    <text id="r_m2d" x="20" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">模型结果：</text>
    </svg><br>
    <svg width="410" height="60">
    <rect width="400" height="50" x="10" y="10" fill="#faff00"/>
    <text id="r_m2bp" x="20" y="40" fill="black" style="font-family:'Montserrat';font-size:13.9px" font-weight="bold">最佳参数：</text>
    </svg>
    </div>
    <div id="advicebox">
      <h2 id="advice_one" style="width:500px">加载中。。。</h2><br><br><h2 id="advice_two" style="width:500px">加载中。。。</h2>
    </div>
  </div>
    <py-script src="lungcancerprediction_api.py" config="pyscript.json"></py-script>
</body>
</html>